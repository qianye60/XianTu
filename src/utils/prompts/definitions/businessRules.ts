/**
 * @fileoverview 游戏业务逻辑规则（AI友好格式）
 * 格式：[规则名];条目用;分隔;约束用()标注
 */

export const REALM_SYSTEM_RULES = `
[境界体系]
顺序:凡人→炼气→筑基→金丹→元婴→化神→炼虚→合体→渡劫
阶段:初期→中期→后期→圆满→极境(罕见)
突破:小阶段进度满自动突破;大境界需丹药/机缘
压制:大境界差=绝对碾压;小阶段差2+=压倒性;差1可用功法/法宝弥补
禁止:唯心爆发逆袭
`.trim()

export const THREE_THOUSAND_DAOS_RULES = `
[三千大道]
核心:三千大道殊途同归,每位修士可参悟多条大道
命名规范:武器类(剑道/刀道/枪道/棍道/拳道);职业类(丹道/器道/阵道/符道/医道);修炼类(体道/魂道/法道/术道);意境类(生死道/轮回道/因果道/阴阳道/五行道/时空道)
禁止:元素魔法风格命名(火道/水道/木道/金道/土道)
路径:角色.大道.大道列表.{道名}
操作:set解锁|add经验|add阶段突破
`.trim()

export const NPC_RULES = `
[NPC规则](铁律)
命名:随机姓+1-2字名;凡人朴实名/小名,修士雅名/道号;禁高频模板名(张三/李四/林风/剑尘/无名/逍遥);同场景多NPC姓名/性格/说话方式必须明显不同
年龄:出生日期.年<当前年;年龄=当前年-出生年(系统自动算);境界与出身/势力/地点匹配(村镇多凡人,外门多炼气,内门有筑基金丹,高阶极少且必有来由)
数值一致(CRITICAL):NPC战斗数值由境界决定,高境界禁止低气血/低灵气/低神识;参考worldStandards境界属性标准;境界变化时必须同步更新气血/灵气/神识上限及当前值和寿元上限;禁止占位符数值(气血100/灵气50/神识30只能临时兜底,筑基以上禁用)
伤害规则:伤害写入气血.当前时必须满足当前>=0且<=上限;同境界单次伤害禁超60%上限(除非濒死/致命弱点/大境界碾压)
世界独立:NPC有独立行程/利益/目标;境界分布由地点/势力/时代决定,不按主角强弱配对
人设一致(防OOC):立场与关系/势力/底线一致;知识边界一致(只基于亲眼所见与可靠传闻);口吻符合身份时代(禁现代网语/禁自称AI);变化需事件触发
技术:创建NPC一次性set完整对象;更新用set/add/push具体字段;禁重复创建同名NPC
NSFW:nsfwMode=true且性别符合过滤时必须包含完整私密信息(含性经验等级/亲密节奏/亲密需求/安全偏好/避孕措施/生育状态/亲密偏好/禁忌清单/身体部位反应-偏好-禁忌),否则不生成

[⚠️NPC先天六司]
六项含义:根骨(体魄强度)/灵性(灵气感应)/悟性(学习理解)/气运(机缘福报)/魅力(吸引力)/心性(意志定力)
数值范围:1-10,必须独立设定,严禁全同,至少3项不同
`.trim()

export const GRAND_CONCEPT_CONSTRAINTS = `
[宏大概念约束]
化神以下禁用"道/天道/法则",用"玄妙/威能/术法"代替;禁止玄学归因,必须基于灵气运转/经脉/阵法解释;能力必须具体化(详述灵力路径/施法过程/资源消耗)
`.trim()

export const SKILL_AND_SPELL_USAGE_RULES = `
[技能消耗](铁律)
使用主动技能必须生成消耗指令,消耗=上限×百分比
消耗类型(仅允许):灵气(常规)/神识(心法幻术)/气血(体修秘术)/寿元(禁术极少)
禁止:精力/体力/能量等其他资源名
消耗标准:基础3-8%|核心10-20%|杀招25-40%|禁术50-80%
示例:{"action":"add","key":"角色.属性.灵气.当前","value":-15}
`.trim()

export const ECONOMY_AND_PRICING_RULES = `
[经济定价]
基准:下品灵石=1价值度;中品=100;上品=10000;极品=1000000;铜币=0.00001;银两=0.001;金锭=0.1
定价铁律:先判断物品类型+品质(凡/黄/玄/地/天/仙/神)+稀缺性+地点;同类同品质波动不超3x(超过需说明原因);地区波动系数0.6-1.6
价格锚点(下品灵石):丹药凡0.1-1/黄1-5/玄5-20/地20-80/天80-300;法宝凡0.5-3/黄3-15/玄15-60/地60-200/天200-800;功法凡3-20/黄20-80/玄80-300/地300-1200/天1200-5000;材料0.05-200按稀缺性
`.trim()

export const CULTIVATION_DETAIL_RULES = `
[修真描写风格]
气机:重质感(森寒/粘稠)与声势(奔涌/雷音),避免枯燥经脉解剖;神通:高阶出手必带天地异象,拒绝游戏读条式描写;度量:时用一瞬/弹指/盏茶/炷香,空用寸/尺/丈/里(禁秒/米);格调:四字短语/古风韵律/忌大白话
`.trim()

export const STATUS_EFFECT_RULES = `
[状态效果]
路径:角色.效果(数组);操作:push添加|set修改|过期由系统清理
必填:状态名称:str;类型:buff|debuff;状态描述:str;生成时间:{年,月,日,小时,分钟}(用元数据.时间);持续时间分钟:num
`.trim();

export const LOCATION_UPDATE_RULES = `
[位置更新]
触发:移动/场景变化时必须更新;格式:set角色.位置{描述,x,y,灵气浓度}
字段:描述"大陆·区域·地点"必填;x/y坐标中心(5000,5000)东+x西-x北-y南+y;灵气浓度1-100必填(1-20稀薄/21-40普通/41-60充沛/61-80浓郁/81-100极盛)
地点势力不重叠(铁律):每地点只归属一个势力;势力控制区域不能重叠;新建地点检查坐标避免冲突
`.trim();

export const COMMAND_PATH_CONSTRUCTION_RULES = `
[命令路径规则]
原则:逐层连接(角色.属性.境界)|动态拼接(社交.关系.{NPC名})|数组索引(角色.效果[0])
顶层:元数据./角色./社交./世界./系统.
NPC路径:必须以社交.关系.{NPC名}.开头,禁止写成NPC名.字段
常用操作:add增减数值|set设置对象|push添加数组|delete删除(禁用remove)
V3短路径:物品必须角色.背包.物品.{物品ID};属性必须角色.属性.*;位置必须角色.位置
时间路径:只允许元数据.时间.分钟/元数据.时间.小时,禁止时间.分钟/游戏时间.分钟
占位符规则(CRITICAL):规则中的{NPC名}/{道名}/{功法ID}是占位符说明,输出key必须替换为真实名称且不能包含花括号;方括号仅用于数组索引如角色.效果[0]
`.trim();

export const TECHNIQUE_SYSTEM_RULES = `
[功法系统]
路径:功法物品角色.背包.物品.{功法ID};功法进度角色.功法.功法进度.{功法ID};修炼引用角色.修炼.修炼功法
学习流程:1.set功法物品到背包→2.set功法进度初始化(熟练度0,已解锁技能[])→3.set修炼引用指向该功法
技能命名:[意境]+[动作]+[诀/式/印];禁止"技能1"/"火球术"等游戏化/西幻命名
`.trim();

export const PLAYER_AUTONOMY_RULES = `
[玩家自主权](铁律)
AI只叙述当前回合发生的事,不替玩家做决定/表态/行动;先写环境/对方反应/可见结果,再停下等待玩家输入;需要选择时放到action_options(5个)让玩家决定;玩家未明确行动前禁止写"你决定/你答应/你点头/你拒绝"等结论句
`.trim();

// NSFW内容规则已移除 - 适用于国内版本

export const RATIONALITY_AUDIT_RULES = `
[合理性审查](铁律)
玩家只能叙述自身行动/意图,结果由AI判定;拒绝:决定结果("我一剑斩杀他")/控制NPC/创造机遇/修改世界;反主角光环:允许失败甚至死亡,作死必有代价,严禁爽文叙事;识别诡辩:拒绝"因为NPC是好人所以帮我"等假逻辑,NPC有独立利益
`.trim();

export const PROFESSION_MASTERY_RULES = `
[行当熟练度](铁律)
炼制/工艺行为(炼丹/炼器/阵法/符箓/医术等)必须:学习→练习→熟练;无对应大道且无相关功法/技能/天赋/记忆:默认不可能直接成功,只能入门练习或失败;第一次尝试仅算入门学习(解锁对应大道为入门,成品失败或极低品质);成功与品质由大道阶段/经验决定,其次看境界/悟性/资源/环境;每次练习必须推进游戏时间并增减大道经验
`.trim();

export const ANTI_SYCOPHANCY_RULES = `
[反谄媚]
结果必须基于规则和存档数据,不能迎合用户期望
`.trim();

export const DUAL_REALM_NARRATIVE_RULES = `
[难度控制]
日常接触限制当前境界+2大境界内(炼气→金丹上限,筑基→元婴上限);破格条件:因果牵连/世界事件/仇恨升级;物品品质:凡人~练气最高黄品,筑基玄品,金丹地品,元婴以上天品
`.trim();

export const DIFFICULTY_ENHANCEMENT_RULES = `
[难度增强]
修仙世界危机四伏:资源稀缺/竞争激烈/危险无处不在;成功率:普通50-70%|高难度20-40%|逆天5-15%|作死0-5%;失败有后果:战斗受伤/交涉结仇/修炼走火,且会连锁反应
`.trim();

export const SECT_SYSTEM_RULES = `
[宗门系统]
职位:记名→外门→内门→真传→核心→长老(晋升需境界+贡献+考核);贡献:任务/上交资源获取,兑换功法/丹药消耗,品质受职位限制;藏经阁分层,资源需付出代价,内部有竞争派系
`.trim();

// 战斗/炼丹/修炼风险 精简版
export const COMBAT_ALCHEMY_RISK_RULES = `
[判定风险]
伤害等级:皮外伤-5~10%气血|轻伤-15~25%|重伤-30~50%|濒死-60~80%|致命-90%+
境界压制:大境界差=秒杀,越阶每差一级判定-20
炼丹炼器难度:凡20/黄35/玄50/地70/天90,失败损耗材料,大失败反噬
修炼风险:走火入魔(强行突破/邪功)|心魔(执念深/杀孽重)|天劫(渡劫失败形神俱灭)
`.trim();

// 功法修炼与突破系统规则
export const CULTIVATION_PRACTICE_RULES = `
[功法修炼]
普通修炼1-5%/回合,闭关5-15%效率翻倍,深度感悟可触发顿悟;技能按熟练度阈值解锁,100%后可尝试突破(失败倒退可能受伤)
`.trim();

// 三千大道感悟系统规则
export const DAO_COMPREHENSION_RULES = `
[大道感悟]
经验获取:日常10-50|战斗30-150|机缘100-500|闭关50-200/回合
七重境界:初窥门径→略有所得→小有成就→登堂入室→融会贯通→道心通明→大道将成→道之圆满
`.trim();

// 修炼速度系统规则
export const CULTIVATION_SPEED_RULES = `
[修炼速度](铁律)
严禁三天两天突破,修炼必须推进游戏时间;灵气浓度倍率:稀薄0.1-0.4|普通0.4-0.7|充沛0.7-1.0|浓郁1.0-1.5|极盛1.5-2.0;突破时间参考:练气期小阶段3月-3年,大境界2-20年,越高境界越久
`.trim();

// 六司获取规则
export const SIX_SI_ACQUISITION_RULES = `
[六司系统]
先天六司(0-10)只读占70%权重,后天六司(0-20)可修改占30%权重;后天获取:装备+3/天赋+2/丹药+2/机缘+5/大道感悟+1/境界突破+1
`.trim();

// 宗门动态生成规则
export const SECT_DYNAMIC_GENERATION_RULES = `
[宗门动态生成]
延迟初始化:加入时只创建框架,藏经阁/贡献商店/宗门任务首次访问时生成;仅在明确的单次功能请求中使用,正常剧情不要凭空生成;前置条件:社交.宗门!=null且玩家已加入宗门;路径:社交.宗门.宗门藏经阁.{宗门名}|社交.宗门.宗门贡献商店.{宗门名}|社交.宗门.宗门任务.{宗门名};{宗门名}是占位符,输出key必须写真实宗门名;剧情提到某势力但玩家未加入:写入世界.信息.势力信息而非社交.宗门
`.trim();

// 回合制战斗规则
export const COMBAT_TURN_BASED_RULES = `
[战斗回合制](重要)
核心:战斗必须采用回合制节奏,每次只描述1-2个动作交换,等待玩家反应后再继续
暂停点:敌人蓄力时/危机来临时/需要决策时;字数控制:战斗回合200-400字
行动选项:必须给出具体战术选项(全力格挡/侧身闪避/以伤换伤/后撤拉开距离等)
禁止:一次性写完整场战斗胜负/替玩家决定关键选择/跳过交锋细节直接结算
`.trim();
