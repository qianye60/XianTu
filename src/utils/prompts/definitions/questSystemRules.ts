/**
 * @fileoverview 任务系统规范
 *
 * 【职责】
 * - 定义任务系统的开关控制
 * - 规范任务生成的触发条件
 */

export const QUEST_SYSTEM_RULES = `
# [重要] 任务系统规范

## 系统开关检查（最高优先级）
**在生成任何任务相关内容之前，必须先检查：SaveData.任务系统.配置.启用系统任务**

### 开关状态判定
\`\`\`
if (SaveData.任务系统.配置.启用系统任务 === false) {
  // ❌ 禁止生成任何任务
  // ❌ 禁止在text中提及"接取任务"、"任务榜"等
  // ❌ 禁止使用 push 到 任务系统.当前任务列表
  // ✅ 可以正常推进剧情，但不涉及任务系统
}

if (SaveData.任务系统.配置.启用系统任务 === true) {
  // ✅ 可以生成任务
  // ✅ 可以在合适的场景提及任务系统
  // ✅ 可以使用任务相关的指令
}
\`\`\`

## 任务系统关闭时的行为规范

### 严禁行为
- ❌ 生成任何形式的任务对象
- ❌ 在叙事文本中提及"任务榜"、"接取任务"、"任务奖励"
- ❌ 使用 \`{"action":"push", "key":"任务系统.当前任务列表", ...}\`
- ❌ 使用 \`{"action":"set", "key":"任务系统.当前任务列表[x].*", ...}\`
- ❌ 提示玩家去"查看任务"、"完成任务"

### 允许行为
- ✅ 正常的剧情推进和场景描述
- ✅ NPC委托、势力要求等（作为剧情事件，不是任务系统）
- ✅ 使用其他系统（修炼、战斗、社交等）

## 任务系统开启时的行为规范

### 触发时机（合理场景）
- 玩家主动询问或查看任务榜时
- 到达任务发布地点（如宗门任务堂）时
- NPC主动委托并且符合任务逻辑时
- 完成重大事件后的奖励任务

### 触发频率控制
- 不要每回合都生成新任务
- 避免任务堆积（检查当前未完成任务数量）
- 尊重配置中的"默认任务数量"设置

### 任务生成要求
**数量**: 根据 SaveData.任务系统.配置.默认任务数量
**类型**: 根据 SaveData.任务系统.配置.系统任务类型 决定风格
**质量**: 任务必须符合当前场景、境界、剧情

## 示例

### ❌ 错误示例（任务系统关闭时）
\`\`\`json
{
  "text": "你来到宗门任务榜前，看到许多任务...",
  "tavern_commands": [
    {"action":"push", "key":"任务系统.当前任务列表", "value":{...}}
  ]
}
\`\`\`

### ✅ 正确示例（任务系统关闭时）
\`\`\`json
{
  "text": "你来到宗门大殿，几位师兄正在交流修炼心得...",
  "tavern_commands": []
}
\`\`\`

### ✅ 正确示例（任务系统开启，且玩家查看任务榜）
\`\`\`json
{
  "text": "你来到任务榜前，发现有几个适合你境界的任务...",
  "tavern_commands": [
    {"action":"push", "key":"任务系统.当前任务列表", "value":{...}}
  ]
}
\`\`\`
`.trim()