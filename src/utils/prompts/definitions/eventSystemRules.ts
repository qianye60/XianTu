/**
 * @fileoverview 世界事件系统规范
 *
 * 说明：
 * - 本文件用于指导 GM（AI）如何理解“世界会变动、会发生大事件”
 * - 随机事件的调度由前端代码负责（见 eventSystem 数据结构与 AIBidirectionalSystem 的注入逻辑）
 */

export const EVENT_SYSTEM_RULES = `
# 规则：世界事件（重要）

## 核心理念
- 世界不以玩家为中心：宗门、势力、秘境、天象、资源与人心都会自行演变
- 大事件必须影响现实：至少带来一个可感知后果（危险、资源、关系、地缘格局、修炼环境变化等）
- 事件必须"刚刚发生"：叙事中用现场感呈现，而不是公告式总结

## 事件类型示例（可混合）
- 宗门大战/势力冲突（围剿、灭门、同盟、割据）
- 世界变革（灵潮涨落、天道异动、法则松动、禁制破裂）
- 异宝降世（灵宝出世、古器苏醒、传承现身）
- 秘境现世（入口出现、规则变化、限时开放）
- 人物风波（好友受伤、好友突破、好友被追杀、恩怨升级）

## 合理性要求
- 事件强度需与玩家境界、声望、位置、当前状态相符（低境界可卷入边缘，仍须受波及）
- 若涉及好友/NPC，优先使用存档中的"关系"与"好感度"推断其动机与结局
- 事件后续需留下"悬念/尾巴"，推动玩家下一步行动

---

## 事件日志记录规则

### 核心原则
大事件/关键事件需要通过tavern_commands添加到"社交.事件.事件记录"中,作为世界历史的一部分永久保存。

### 需要记录的事件类型

**境界突破类**:
- 玩家突破大境界(练气→筑基、筑基→金丹等)
- 好友/重要NPC突破大境界
- 渡劫成功或失败

**机缘获得类**(仅顶尖级别):
- 获得天品及以上功法
- 获得天品及以上法宝
- 获得仙品/神品任何物品
- 发现重大秘境/传承

**人物关系类**:
- 结为道侣/成婚
- 与道侣/伴侣的第一次亲密
- 好友列表中的人的重要亲密事件
- 重要NPC陨落/身死
- 结拜/收徒/拜师

**世界事件类**(随机触发的都算):
- 宗门大战/势力冲突
- 世界变革/天道异动
- 异宝降世/秘境现世
- 其他系统随机触发的事件

### 不需要记录的事件
- 日常修炼/小阶段突破
- 普通物品获取(地品及以下)
- 普通社交互动
- 日常战斗/任务

### 事件记录格式(通过tavern_commands添加)
{
  "action": "push",
  "key": "社交.事件.事件记录",
  "value": {
    "事件ID": "evt_[类型]_[时间戳]",
    "事件名称": "简短标题",
    "事件类型": "宗门大战/世界变革/异宝降世/秘境现世/人物风波",
    "事件描述": "详细描述",
    "影响等级": "轻微/中等/重大/灾难",
    "影响范围": "影响的地理范围",
    "相关人物": ["涉及的人物名"],
    "事件来源": "随机/玩家影响/系统",
    "发生时间": { "年": x, "月": x, "日": x }
  }
}
`.trim();

