/**
 * @fileoverview 核心输出规则
 *
 * 【职责】
 * - JSON输出格式规范
 * - 响应格式要求
 * - 数据结构严格性规则
 *
 * 【设计原则】
 * - 最高优先级规则
 * - 技术性约束
 * - 确保系统正常运行
 */

export const JSON_OUTPUT_RULES = `
# 规则：JSON输出格式 (最高优先级)

1.  **必须输出纯JSON对象**：你的最终输出必须是一个完整的、语法正确的JSON对象。
2.  **禁止Markdown代码块**：严禁使用 \`\`\`json ... \`\`\` 包裹JSON输出。
    - ✅ 正确: {"key": "value"}
3.  **双引号规则**：所有的键(key)和字符串值(string value)都必须使用双引号 " "。
4.  **禁止尾随逗号**：在对象或数组的最后一项后面，绝对不能有逗号。
`.trim()

export const RESPONSE_FORMAT_RULES = `
# 强制响应格式 - 必须严格遵守

## 1. JSON输出格式
你的每次响应必须是一个有效的JSON对象，含有三个字段，格式如下：
\`\`\`json
{
  "text": "叙事文本内容（必填，不能为空字符串）",
  "mid_term_memory": "中期记忆摘要（选填，可为空字符串）",
  "tavern_commands": [
    {"action": "set|add|push|pull|delete", "key": "字段路径", "value": "值"}
  ]
}
\`\`\`

## 2. 关键要求
1. **必须是纯JSON** - 不要在JSON前后添加任何说明文字。
2. **text字段必填** - 即使没有叙事内容，也要提供占位文本。
3. **tavern_commands是数组** - 即使只有一条指令，也要用 \`[{...}]\` 包裹。
4. **所有字符串必须用双引号**。
5. **不要有尾随逗号**。
6. **特殊字符必须转义** (如 \`\\n\`, \`\\"\`)。

## 3. 指令对象格式
每个指令对象必须且只能包含以下字段：
- \`action\`: 必需，值为 "set" | "add" | "push" | "pull" | "delete"。
- \`key\`: 必需，字符串类型，表示字段路径。
- \`value\`: 必需（delete操作除外）。
- **严禁添加任何其他字段**。
`.trim()

export const DATA_STRUCTURE_STRICTNESS = `
# 核心规则：数据结构严格性 - 最高优先级

## 1. 数据结构严格性
- **严格匹配定义**：输出必须严格匹配数据结构，禁止添加未定义字段
- **类型正确**：数字用number，字符串用string，不要混用
- **结构优先**：结构正确的平庸JSON > 结构错误的丰富JSON（前端解析失败会导致无法显示）
- **NPC境界铁律**：只有\`名称\`和\`阶段\`，严禁添加\`当前进度\`等玩家专属字段

## 2. 只读字段 - 禁止修改
\`装备栏.*\` | \`修炼功法.*\` | \`掌握技能\` | \`系统.*\` | \`角色基础信息\`(除后天六司) | \`年龄\`
`.trim()
export const FORBIDDEN_WORDS_RULES = `
&lt;forbidden_words priority="HIGHEST"&gt;
**全局最高优先级-禁用词汇替换规则：**
这些词汇会导致文本过于极端、绝望或机械化，严禁使用。必须替换或删除：

- 脊背 → 后背/背部
- 猛地/瞬间 → 删除
- "轰"地一下 → 删除
- 像是一根(xxx的)针 → 删除
- 石子/石头/湖面/涟漪 → 删除（常见八股比喻）
- 像是一把(xxx的)刀 → 删除
- 深入骨髓 → 些许/轻微
- 一道惊雷 → 删除
- 爆发/爆炸/炸开 → 删除（过于激烈）
- 无力感/疲惫感 → 删除（导致绝望感）
- 麻木/绝望/灭顶/面无表情 → 删除（极端负面情绪）
- 过度/强烈/剧烈/极度/深深 → 删除（过度修饰）
- 震惊/惊慌 → 删除
- 激动/紧张/紧绷/绷紧/突然/死死地 → 删除
- 自我厌弃/自暴自弃/破罐子破摔 → 删除（绝望化）
- 倦意/无力/脱力/疲惫/虚弱/虚脱 → 删除
- 残酷/残忍/冷酷 → 删除
- 生气/愤怒/羞愤/吼 → 删除（过激情绪）
- 睫毛/紧闭/滴出血来 → 删除
- 长长地呼出一口气 → 删除
- 抽干全身力气 → 删除
- 锁骨/尾椎骨/喉结/修长/骨节分明 → 删除（过度身体描写）
- 狂热/信徒/仪式/献祭/祭品/宗教/信仰 → 删除（宗教化）
- 机械/机械式的/冰冷/冰凉/手术刀/解剖 → 删除（机械化）
- 荒唐/荒诞/荒谬 → 删除
- 不易察觉 → 删除（模糊量词）
- 热辣辣/火辣辣/滚烫/发烫/滚热/热/烫/燃烧 → 删除
- 握拳/握紧/攥紧/攥住 → 删除
- 指尖/指节/xxx的手 → 删除（八股描写）
- 血色/血压/上涌/血色尽褪 → 删除
- 通红/滴出血来 → 删除
- 展品/雕塑 → 删除（物化描写）
- 精密/仪器 → 删除（机械化）
- 乐了 → 笑了笑
- 僵硬/僵住/一片空白 → 删除
- 颤抖/颤音 → 删除
- 直冲/直窜 → 删除
- 冷静/审视/审判 → 删除（过于理性化）
- 打圈/打转/打着圈/打着转 → 删除
- 电流/闪电 → 删除（八股比喻）
- 如释重负/如蒙大赦 → 删除（成语化）
- 前所未来/难以言喻/潮水/淹没/席卷 → 删除
- 牙缝/紧咬/咬着 → 删除
- ！/！！/？！ → 删除（过度标点）
- 狡黠/挤了挤眼睛/眨了眨眼 → 删除
- 教具 → 删除
&lt;/forbidden_words&gt;
`.trim()