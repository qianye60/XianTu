/**
 * @fileoverview 文本格式规范
 */

export const TEXT_FORMAT_MARKERS = `
# 文本格式标记

- 环境描写: \`【...】\`
- 内心思考: \`\`...\`\`
- 角色对话: \`"..."\`
- 系统判定: \`〖...〗\`
`.trim()

export const DICE_ROLLING_RULES = `
# 🎲 判定系统 v2.2

## 触发判断（95%场景不判定）
✅ 需要：生死战斗、危险探索、有明确失败风险的行动
❌ 禁止：对话/交流/已控制对象/日常活动/确定成功/实力碾压

## 难度与压制
- 难度：极易≤10、简单11-20、普通21-35、困难36-50、艰难51-70、极难71-90、几乎不可能>90
- 境界压制：大境界±30/境，小阶段±5/阶（初期→中期→后期→圆满→极境）

## 判定值计算

### 先天公式
| 类型 | 公式 |
|-----|------|
| 战斗 | 根骨×0.5 + 灵性×0.3 + 气运×0.2 |
| 修炼 | 悟性×0.5 + 灵性×0.3 + 心性×0.2 |
| 技艺 | 悟性×0.5 + 根骨×0.3 + 灵性×0.2 |
| 社交 | 魅力×0.5 + 悟性×0.3 + 心性×0.2 |
| 探索 | 气运×0.5 + 灵性×0.3 + 悟性×0.2 |

### 其他加成
- 后天：对应先天公式÷5
- 境界：凡人0/炼气5/筑基12/金丹20/元婴30/化神42/炼虚56/合体72/渡劫90 + 阶段(初期+0/中期+2/后期+4/圆满+6/极境+8)
- 其他：法宝/阵法/功法/天赋/丹药/大道/环境等（字段名准确，无加成可省略）

### 计算步骤
1. 列出所有项：先天 + 后天 + 境界 + [各项加成] + 骰点
2. 逐步累加验算：A+B=X, X+C=Y...

## 结果判定（4步）
1. **计算判定值**：先天+后天+境界+各项加成+骰点
2. **基础结果**：<难度→失败 | ≥难度→成功 | ≥难度+15→大成功 | ≥难度+30→完美
3. **骰点修正**：1降一级 | 20升一级 | 其他不变（大失败↔失败↔成功↔大成功↔完美）
4. **最终结果**：基础结果经骰点修正后的结果

## 输出格式

**CoT输出**：
Type & Difficulty: [类型] | 基础[X]±压制[Y]=[Z]
Calculation: 先天[A](公式)+后天[B]+境界[C]+加成[D]+骰点[E] = 判定值[F]
验算: A+B=X, X+C=Y... = F ✓
Result: [F] vs [Z] → 基础[X] → 修正[Y] → 最终[Z]

**DiceCard**：
〖类型:结果,判定值:X,难度:Y(等级),骰点:Z,先天:A(公式),后天:B,境界:C(名称),[具体加成]〗

🔴 **字段规则**：
- 必填：类型、结果、判定值、难度、骰点、先天、后天、境界
- 加成用准确名称：法宝、阵法、功法、天赋、丹药、大道、环境等
- 禁止模糊词：装备、状态、其他
- 无加成可省略，不要写0

**示例**：
〖社交判定:完美,判定值:46,难度:10(极易),骰点:19,先天:10(魅力10×0.5+悟性10×0.3+心性10×0.2),后天:0,境界:7(炼气中期),天赋:10(顶级魅力)〗

## 战斗伤害
\`基础伤害=(根骨+灵性)×境界系数+武器伤害\`
\`实际伤害=基础伤害-(对方根骨+护甲)×境界系数\`
境界系数：炼气1/筑基2/金丹4/元婴8/化神15/炼虚25/合体40/渡劫60
`.trim()

export const JUDGMENT_RULES = DICE_ROLLING_RULES; // 保留旧的导出名以兼容

export const NAMING_CONVENTIONS = `
# 命名约定

物品ID:\`类型_数字\` | 位置:\`大陆·地点\` | 品质:\`{"quality":"凡~神","grade":0-10}\`
`.trim()

export const TEXT_FORMATS = `
# 【文本格式与命名】

${TEXT_FORMAT_MARKERS}

${JUDGMENT_RULES}

${NAMING_CONVENTIONS}
`.trim()
