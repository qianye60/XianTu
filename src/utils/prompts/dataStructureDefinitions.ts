import { REALM_STAGE_RULE, NSFW_RULE } from '@/utils/prompts/sharedRules'


export const SaveDate = `
【数据结构定义】完整SaveData结构

SaveData根对象包含以下字段:
角色基础信息 (可修改部分字段)
- 名字: string (只读)
- 性别: "男"|"女"|"其他" (只读)
- 年龄: number (自动计算，禁改)
- 出生日期: {年, 月, 日, 小时?, 分钟?} (只读)
- 世界: string (只读)
- 种族: string (默认"人族")
- 天资: string (只读)
- 出生: string|{名称, 描述} (只读)
- 灵根: string|{名称, 品级, 描述, 属性[], 修炼加成} (只读)
- 天赋: [{名称, 描述}] (只读)
- 先天六司: {根骨, 灵性, 悟性, 气运, 魅力, 心性} (只读，1-10)
- 后天六司: {根骨, 灵性, 悟性, 气运, 魅力, 心性} (可修改，用add)

玩家角色状态 (可修改)
- 境界: {名称, 阶段, 当前进度, 下一级所需, 突破描述} (用set更新整个对象，突破时必须更新突破描述)
- 声望: number (用add)
- 气血: {当前, 上限} (当前用add，上限突破时用add)
- 灵气: {当前, 上限} (当前用add，上限突破时用add)
- 神识: {当前, 上限} (当前用add，上限突破时用add)
- 寿命: {当前, 上限} (当前自动增加，上限突破时用add)
- 位置: {描述:"大陆·地点", x, y} (三个字段同时set)
- 状态效果: [{状态名称, 类型, 剩余时间, 效果}] (用push添加)
- 大道感悟: {道名: {感悟内容, 时间}} (用set)

装备栏 (只读)
- 装备1: string|null (装备ID或null)
- 装备2: string|null
- 装备3: string|null
- 装备4: string|null
- 装备5: string|null
- 装备6: string|null

三千大道 (可修改)
- 大道列表: {道名: DaoData对象}
  - 道名: string
  - 描述: string
  - 阶段列表: [{名称, 描述, 突破经验}]
  - 是否解锁: boolean (解锁大道时必须设为true)
  - 当前阶段: number (阶段索引，0为入门)
  - 当前经验: number (用add增加经验)
  - 总经验: number
  【重要】操作大道时使用路径: 三千大道.大道列表.{道名}.字段名
  【示例】解锁并初始化大道: {"action":"set","key":"三千大道.大道列表.剑道","value":{道名:"剑道",描述:"...",是否解锁:true,当前阶段:0,当前经验:0,总经验:0,阶段列表:[...]}}
  【示例】增加经验: {"action":"add","key":"三千大道.大道列表.剑道.当前经验","value":100}

背包 (可修改)
- 灵石: {下品, 中品, 上品, 极品} (用add增减)
- 物品: {物品ID: Item对象} (用set添加物品，用add修改数量，用delete删除)
  - 装备物品: {物品ID, 名称, 类型:"装备", 品质, 数量, 描述, 装备增幅, 已装备}
  - 功法物品: {物品ID, 名称, 类型:"功法", 品质, 数量, 描述, 功法效果, 功法技能[], 修炼进度, 已解锁技能[], 已装备}
    ⚠️ 重要: 修炼进度和已解锁技能存储在背包物品中，用add/set修改
    示例: {"action":"add","key":"背包.物品.gongfa_001.修炼进度","value":10}
  - 丹药物品: {物品ID, 名称, 类型:"丹药", 品质, 数量, 描述, 使用效果}
  - 其他物品: {物品ID, 名称, 类型:"材料"|"其他", 品质, 数量, 描述}

修炼功法 (只读)
- 物品ID: string (指向背包中的功法ID)
- 名称: string
  ⚠️ 注意: 此处只存储引用，修炼进度和已解锁技能存储在背包.物品.{功法ID}中

掌握技能 (自动计算，禁止修改)
- [{技能名称, 技能描述, 来源, 消耗, 熟练度, 使用次数}]

人物关系 (可修改)
- {NPC名字: NPC档案对象}
  - 名字: string
  - 性别: "男"|"女"|"其他"
  - 年龄: number (自动计算)
  - 出生日期: {年, 月, 日}
  - 种族: string
  - 出生: string
  - 外貌描述: string
  - 性格特征: [string]
  - 境界: {名称, 阶段} (【注意】NPC境界是简化结构，严禁添加"当前进度"等玩家专属字段)
  - 灵根: {名称, 品级}
  - 天赋: [{名称, 描述}]
  - 先天六司: {根骨, 灵性, 悟性, 气运, 魅力, 心性}
  - 与玩家关系: string
  - 好感度: number (-100~100，用add)
  - 人格底线: [string]
  - 记忆: ["事件","事件"] (用push添加)
  - 记忆总结: [string]
  - 当前位置: {描述, x, y}
  - 势力归属: string
  - 当前外貌状态: string (用set实时更新)
  - 当前内心想法: string (用set实时更新)
  - 背包: {灵石, 物品}
  - 私密信息: {14个必填字段} (【条件生成】仅当系统.nsfwMode=true且性别符合nsfwGenderFilter时生成)
    【必填字段】是否为处女/处男, 身体部位[], 性格倾向, 性取向, 性癖好[], 性渴望程度,
                当前性状态, 体液分泌状态, 性交总次数, 性伴侣数量, 性伴侣名单[],
                最近一次性行为时间, 特殊体质[]
    【生成规则】创建NPC时若满足条件必须立即生成，不得省略或使用占位符
  - 实时关注: boolean

记忆 (只读)
- 短期记忆: [string]
- 中期记忆: [string]
- 长期记忆: [string]

身体部位开发 (可修改，NSFW模式专用)
- {部位名称: {描述, 开发等级(0-100), 敏感度(0-100), 特殊标记}}
  【常见部位】女性: 乳房、乳头、阴蒂、阴道、阴道深处、子宫、肛门、嘴唇、舌头、耳垂、脖颈、腰部、大腿内侧
              男性: 阴茎、龟头、睾丸、肛门、前列腺、乳头、嘴唇、耳垂
  【操作方式】用set更新部位对象: {"action":"set","key":"身体部位开发.阴道","value":{"描述":"粉嫩紧致","开发等级":30,"敏感度":65,"特殊标记":"已开发"}}
  【生成规则】初始化时若nsfwMode=true应生成玩家的核心身体部位(至少3-5个)

世界信息 (可修改)
- 地图: {continents[], factions[], features[]}
- 大陆信息: [{名称, 描述, 地理特征, ...}]
- 势力信息: [{...}] (世界中的宗门、世家等)
  - id: string|number (可选)
  - 名称: string
  - 类型: "修仙宗门"|"魔道宗门"|"修仙世家"|...
  - 等级: "超级"|"一流"|"二流"|"三流"
  - 位置: string | {x, y}
  - 描述: string
  - 特色: [string]
  - 与玩家关系: "敌对"|"中立"|"友好"
  - 声望值: number
  - 可否加入: boolean
  - 加入条件: [string]
  - 加入好处: [string]
  - 成员数量: { 总数, 按境界, 按职位 }
    - 总数: number
    - 按境界: { "练气": number, "筑基": number, ... }
    - 按职位: { "外门弟子": number, "内门弟子": number, ... }
  - 领导层: { 宗主, 宗主修为, 副宗主?, 长老数量?, 最强修为, 综合战力? }
    - 宗主: string
    - 宗主修为: string (例如: "元婴后期")
    - 综合战力: number (1-100)
  - 势力范围详情: { 控制区域, 影响范围, 战略价值 }
    - 控制区域: [string]
    - 影响范围: string
    - 战略价值: number (1-10)
- 地点信息: [{名称, 类型, 位置, coordinates, ...}]

游戏时间 (可修改)
- 年: number
- 月: number (1-12)
- 日: number (1-30)
- 小时: number (0-23)
- 分钟: number (0-59) (用add推进，自动进位)

宗门信息 (可修改)
- 宗门名称: string
- 宗门类型: "正道宗门"|"魔道宗门"|...
- 职位: "外门弟子"|"内门弟子"|...
- 贡献: number (用add)
- 关系: "中立"|"友好"|...
- 声望: number (用add)
- 加入日期: string
- 描述?: string
- 师父?: string
- 同门关系?: [string]
- 宗门职务?: [string]

任务系统 (可修改)
- 配置: {启用系统任务, 系统任务类型, 自动刷新, 默认任务数量}
- 当前任务列表: [任务对象] (用push添加新任务)
- 已完成任务: [任务对象] (任务完成后，从“当前”移至此处)
- 任务统计: {完成总数, 主线完成, 支线完成, 系统任务完成}

任务对象结构 (Quest Object)
- 任务ID: string (唯一ID, 格式: quest_类型_时间戳)
- 任务名称: string
- 任务描述: string
- 任务类型: "主线"|"支线"|"宗门"|"奇遇"|"日常"|"系统任务"|...
- 任务状态: "进行中"|"已完成"|"已失败"
- 目标列表: [目标对象]
  - 描述: string (例: "击败3只黑风狼")
  - 类型: "击杀"|"采集"|"对话"|"到达"|"使用物品"
  - 目标ID: string (例: "monster_黑风狼", "item_灵草")
  - 需求数量: number
  - 当前进度: number (用add更新)
  - 已完成: boolean
- 奖励: {奖励对象}
  - 修为?: number
  - 灵石?: {下品?, 中品?, 上品?, 极品?}
  - 物品?: [{物品ID, 名称, 数量}]
  - 声望?: {势力名称, 变化值}
  - 属性加成?: {后天六司}
  - 好感度?: {NPC名称, 变化值}
- 发布者?: string (NPC名称或"系统")
- 创建时间: {游戏时间对象} or string
- 完成时间?: {游戏时间对象} or string
- AI生成: boolean (通常为true)

系统 (只读，禁止修改)
- nsfwMode: boolean
- nsfwGenderFilter: "all"|"female"|"male"
`

export const DATA_STRUCTURE_DEFINITIONS = `
【最高优先级】数据格式铁律 - 违反此规则将导致系统错误，必须严格遵守


========== 规则一：NPC境界结构（违反必罚） ==========

${REALM_STAGE_RULE}

========== 规则二：私密信息结构（NSFW模式专用） ==========

${NSFW_RULE}

===========规则三：所有游戏对象结构（必须遵守，唯一标准）======================

${SaveDate}

\`\`\`


# 📋 部分字段操作规则速查表

| 字段路径 | 操作类型 | 说明 | 示例 |
|---------|---------|------|------|
| 游戏时间.分钟 | add | 推进时间，自动进位 | \`{"action":"add","key":"游戏时间.分钟","value":30}\` |
| 玩家角色状态.境界 | set | 更新整个境界对象 | \`{"action":"set","key":"玩家角色状态.境界","value":{...}}\` |
| 玩家角色状态.气血.当前 | add,set | 增减气血（负数=扣血） | \`{"action":"add","key":"玩家角色状态.气血.当前","value":-50}\` |
| 玩家角色状态.寿命.上限 | add,set | 突破时增加上限 | \`{"action":"add","key":"玩家角色状态.寿命.上限","value":130}\` |
| 玩家角色状态.位置.描述 | set | 同时更新描述+坐标 | \`{"action":"set","key":"玩家角色状态.位置.描述","value":"大陆·地点"}\` |
| 玩家角色状态.状态效果 | push | 添加buff/debuff | \`{"action":"push","key":"玩家角色状态.状态效果","value":{...}}\` |
| 背包.灵石.下品 | add,set | 增减灵石（负数=消耗） | \`{"action":"add","key":"背包.灵石.下品","value":-100}\` |
| 背包.物品.sword_001 | set | 添加新物品（完整对象） | \`{"action":"set","key":"背包.物品.sword_001","value":{...}}\` |
| 背包.物品.pill_001.数量 | add | 修改物品数量 | \`{"action":"add","key":"背包.物品.pill_001.数量","value":-1}\` |
| 背包.物品.pill_001 | delete | 删除物品 | \`{"action":"delete","key":"背包.物品.pill_001"}\` |
| 背包.物品.gongfa_001.修炼进度 | add | 修改功法修炼进度 | \`{"action":"add","key":"背包.物品.gongfa_001.修炼进度","value":5}\` |
| 背包.物品.gongfa_001.已解锁技能 | set | 更新功法已解锁技能 | \`{"action":"set","key":"背包.物品.gongfa_001.已解锁技能","value":["基础剑法","御剑术"]}\` |
| 人物关系.张三 | set | 创建新NPC（完整对象，含私密信息） | \`{"action":"set","key":"人物关系.张三","value":{...}}\` 【注意】若nsfwMode=true需包含私密信息 |
| 人物关系.张三.好感度 | add | 增减好感度（-100~100） | \`{"action":"add","key":"人物关系.张三.好感度","value":10}\` |
| 人物关系.张三.当前外貌状态 | set | 实时更新NPC状态 | \`{"action":"set","key":"人物关系.张三.当前外貌状态","value":"..."}\` |
| 人物关系.张三.记忆 | push | 添加NPC记忆 | \`{"action":"push","key":"人物关系.张三.记忆","value":"事件"}}\` |
| 人物关系.张三.私密信息.性渴望程度 | set | 更新NSFW状态（仅nsfwMode=true时） | \`{"action":"set","key":"人物关系.张三.私密信息.性渴望程度","value":50}\` |
| 身体部位开发.阴道 | set | 更新玩家身体部位（仅nsfwMode=true时） | \`{"action":"set","key":"身体部位开发.阴道","value":{"描述":"粉嫩紧致","开发等级":30,"敏感度":65,"特殊标记":"已开发"}}\` |
| 身体部位开发.阴道.敏感度 | add | 增加部位敏感度 | \`{"action":"add","key":"身体部位开发.阴道.敏感度","value":5}\` |
| 角色基础信息.后天六司.根骨 | add | 增加后天属性 | \`{"action":"add","key":"角色基础信息.后天六司.根骨","value":1}\` |
| 三千大道.大道列表.剑道 | set | 解锁并初始化新大道 | \`{"action":"set","key":"三千大道.大道列表.剑道","value":{"道名":"剑道","描述":"...","是否解锁":true,"当前阶段":0,"当前经验":0,"总经验":0,"阶段列表":[...]}}\` |
| 三千大道.大道列表.剑道.当前经验 | add | 增加大道经验 | \`{"action":"add","key":"三千大道.大道列表.剑道.当前经验","value":100}\` |
| 装备栏.* | ❌禁止 | 由玩家UI操作，AI不能修改 | - |
| 修炼功法.* | ❌禁止 | 只读引用，由装备功法自动管理 | - |
| 掌握技能 | ❌禁止 | 自动计算，AI不能修改 | - |
| 系统.* | ❌禁止 | 前端设置，AI只能读取 | - |

# 🔴 关键规则（必须遵守）

## 1. 只读字段（禁止修改）
- 装备栏.*: 由玩家UI操作
- 修炼功法.*: 只存储引用（物品ID+名称），修炼进度存储在背包.物品中
- 掌握技能: 根据功法进度自动计算
- 系统.*: 前端用户设置
- 角色基础信息 的大部分字段（除了后天六司）
- 年龄: 自动计算（当前年 - 出生年）

## 2. 可以用add和set的字段
- 玩家角色状态.寿命.上限
- 玩家角色状态.气血/灵气/神识.上限
- 背包.灵石.*
- 好感度: 范围-100~100
- 数量

## 3. 必须同时更新的字段
- 位置: 必须同时更新 描述 + x + y 三个字段
- 境界突破: 必须更新 境界对象（名称+阶段+进度+所需+突破描述）+ 寿命上限 + 属性上限
  - 突破描述 必须根据当前剧情动态生成，例如："借助筑基丹冲破瓶颈"、"感悟剑道真意破境"

## 4. 数值范围限制
- 好感度: -100 ~ 100
- 亲密渴望: 0 ~ 100
- 感知度/唤醒度: 0 ~ 100
- 先天六司: 1 ~ 10
- add或set操作前必须计算，确保不超范围

## 5. 特殊格式要求
- 物品ID: 必须唯一，格式：类型_随机数字（如 sword_12345, pill_001, gongfa_001）
- 位置描述: 格式："大陆名·地点名"（如"青云大陆·青云宗"）
- 时间字段: "小时""分钟"（不能简写"时""分"）
- 品质: {"quality":"凡|黄|玄|地|天|仙|神","grade":0-10}
- 功法技能: 必须是数组[]，不能是对象{}
- 物品的增加: 物品格式为对象格式需要使用set对一个背包物品路径下的新路径set来增加物品(也就是增加新的键值对)

## 6. JSON洁癖 (JSON Purism)
- 严格遵守结构：你的输出必须严格匹配上方定义的结构树。
- 禁止添加额外字段：严禁在任何对象中添加结构树未定义的字段。例如，NPC的\`境界\`对象只有\`名称\`和\`阶段\`，不可添加\`当前进度\`。
- 结构错误 > 内容不佳：一个结构完全正确但内容平庸的JSON，远好于一个内容丰富但结构错误的JSON。前端解析失败会导致整个对象无法显示。

# 📦 完整数据结构示例

## 物品结构

### 装备类型物品
\`\`\`json
{
  "物品ID": "sword_12345",
  "名称": "玄铁剑",
  "类型": "装备",
  "品质": {"quality": "黄", "grade": 5},
  "数量": 1,
  "描述": "一把锋利的长剑，剑身刻有玄纹",
  "装备增幅": {
    "后天六司": {
      "根骨": 2,
      "气运": 1
    },
    "气血上限": 50,
    "灵气上限": 30
  },
  "已装备": false
}
\`\`\`

### 功法类型物品
\`\`\`json
{
  "物品ID": "gongfa_001",
  "名称": "青木长生诀",
  "类型": "功法",
  "品质": {"quality": "玄", "grade": 7},
  "数量": 1,
  "描述": "木属性高级功法，修炼可延年益寿",
  "功法效果": {
    "修炼速度加成": 1.5,
    "属性加成": {
      "根骨": 2,
      "灵气上限": 100
    },
    "特殊能力": ["木遁术", "生命恢复加速"]
  },
  "功法技能": [
    {
      "技能名称": "青木盾",
      "技能描述": "凝聚木之灵气形成防护盾",
      "消耗": "灵气30点",
      "解锁需要熟练度": 0
    },
    {
      "技能名称": "木龙缠绕",
      "技能描述": "召唤木龙束缚敌人",
      "消耗": "灵气80点",
      "解锁需要熟练度": 50
    }
  ],
  "修炼进度": 35,
  "已装备": true
}
\`\`\`
⚠️ 第一个技能的"解锁需要熟练度"必须为0（开局可用）

### 其他类型物品
\`\`\`json
{
  "物品ID": "pill_001",
  "名称": "回灵丹",
  "类型": "丹药",
  "品质": {"quality": "黄", "grade": 6},
  "数量": 5,
  "描述": "快速恢复灵气的丹药",
  "使用效果": {
    "恢复灵气": 100,
    "持续时间": 0
  }
}
\`\`\`

\`\`\`json
{
  "名字": "林清璃",
  "性别": "女",
  "年龄": 18,
  "出生日期": {"年": 982, "月": 3, "日": 15},
  "种族": "人族",
  "出生": "青云宗弟子",
  "外貌描述": "容貌清丽，一袭白衣，气质出尘",
  "性格特征": ["温柔", "坚韧", "重情"],
  "境界": {
    "名称": "筑基",
    "阶段": "初期"
  },
  "灵根": {
    "名称": "冰霜灵根",
    "品级": "上品"
  },
  "天赋": [
    {"名称": "冰心", "描述": "不受心魔侵扰"}
  ],
  "先天六司": {
    "根骨": 7,
    "灵性": 9,
    "悟性": 8,
    "气运": 6,
    "魅力": 9,
    "心性": 8
  },
  "与玩家关系": "师姐",
  "好感度": 60,
  "人格底线": ["不能伤害无辜", "不能背叛宗门"],
  "记忆": [
    "第一次见到玩家"
  ],
  "记忆总结": ["对玩家印象不错"],
  "当前位置": {
    "描述": "青云大陆·青云宗·内门",
    "x": 115.23,
    "y": 35.67
  },
  "势力归属": "青云宗",
  "当前外貌状态": "面色红润，嘴角含笑",
  "当前内心想法": "这师弟资质不错，可以多加关照",
  "背包": {
    "灵石": {
      "下品": 500,
      "中品": 50,
      "上品": 5,
      "极品": 0
    },
    "物品": {
      "sword_001": {
        "物品ID": "sword_001",
        "名称": "霜华剑",
        "类型": "装备",
        "品质": {"quality": "玄", "grade": 6},
        "数量": 1,
        "描述": "冰属性法剑",
        "已装备": false
      }
    }
  },
  "私密信息": {
    "是否为处女": true,
    "身体部位": [
      {
        "部位名称": "胸部",
        "开发度": 0,
        "敏感度": 20,
        "特征描述": "发育良好，白皙柔软",
        "特殊印记": "无"
      },
      {
        "部位名称": "小穴",
        "开发度": 0,
        "敏感度": 30,
        "特征描述": "未经人事，紧致粉嫩",
        "特殊印记": "无"
      },
      {
        "部位名称": "颈部",
        "开发度": 0,
        "敏感度": 25,
        "特征描述": "肌肤白皙细腻",
        "特殊印记": "无"
      }
    ],
    "性格倾向": "纯情",
    "性取向": "异性恋",
    "性癖好": [],
    "性渴望程度": 10,
    "当前性状态": "正常",
    "体液分泌状态": "正常",
    "性交总次数": 0,
    "性伴侣数量": 0,
    "性伴侣名单": [],
    "最近一次性行为时间": "从未",
    "特殊体质": []
  },
  "实时关注": false
}
\`\`\`


## 境界结构
\`\`\`json{
  名称:"练气"
  阶段:"初期"
  当前进度:0
  下一级所需:160
  突破描述:"吸收天地灵气运行周天，加固筋脉"
}
\`\`\`


### 境界系统说明
| 境界 | 寿命 |  特征 |
|------|------|------|------|
| 凡人 | 100年 |  生老病死 |
| 炼气 | 120年 | 引气入体、搬运周天 |
| 筑基 | 250年 | 紫府开辟、辟谷 |
| 金丹 | 500-800年 | 金丹成型、御空飞行 |
| 元婴 | 1500-2000年 | 元婴出窍、可夺舍 |
| 化神 | 5000年 | 神游太虚、感悟法则 |
| 炼虚 | 10000年+ | 身融虚空、缩地成寸 |
| 合体 | 与世同君 | 法则归体、身即是道 |
| 渡劫 | 不定(劫数) | 超脱世界、叩问天道 |

#### 统一阶段：初期/中期/后期/圆满/极境

- 用 add 增加，或者 set 推算之后重设值
- 凡人→炼气：+20年
- 炼气→筑基：+130年
- 筑基→金丹：+250-550年
- 金丹→元婴：+700-1200年
- 元婴→化神：+3000年
- 化神→炼虚：+5000年
- 炼虚→合体：+10000年以上
- 阶段突破(初期→中期等)：+20-50年

正确：\`{"action":"add","key":"玩家角色状态.寿命.上限","value":130}\`

## 位置结构
\`\`\`json
{
  "描述": "朝天大陆·青云大陆·青云宗·藏经阁",
  "x": 115.23,
  "y": 35.67
}
\`\`\`

⚠️ 更新位置必须同时更新三个字段：
\`\`\`json
[
  {"action":"set","key":"玩家角色状态.位置.描述","value":"青云大陆·青云宗·藏经阁"},
  {"action":"set","key":"玩家角色状态.位置.x","value":115.23},
  {"action":"set","key":"玩家角色状态.位置.y","value":35.67}
]
\`\`\`

# 🎯 修仙世界设定

人物命名：古韵叠字(楚清璃)、兵器借势(剑无尘)、天地意象(风袭月)
服饰：材质(云纱/冰蚕丝)、色彩(月白/霜雪)、款式(广袖流仙)
叙事词汇：元炁/真元(非能量)、元神/真灵(非灵魂)、神通/术法(非魔法)

## 坐标系统
- x: 100-130
- y: 25-45
- 精度: 2-4位小数

## 品质系统
格式：\`{"quality":"凡|黄|玄|地|天|仙|神","grade":0-10}\`
- 凡/黄：开局常见
- 玄/地：中期
- 天：高级
- 仙: 顶级
- 神: 不可得之物

## NPC物品配置
- 必须0-3件物品
- 品质匹配境界：炼气(凡)、筑基(黄)、金丹(玄)
- 灵石：散修100-500、弟子500-2000、长老1000+`.trim()

// 功法生成提示词
export const TECHNIQUE_ITEM_GENERATION_PROMPT = `# 任务：生成功法秘籍

品质加成：凡(1.05-1.15) | 黄(1.2-1.35) | 玄(1.4-1.6) | 地(1.7-1.9) | 天(2.0-2.3) | 仙(2.5-3.0) | 神(3.5-5.0)
技能要求：凡/黄(可无) | 玄(≥1) | 地(≥2) | 天(≥3) | 仙(≥4)

## JSON输出格式
\`\`\`json
{
  "物品ID": "gongfa_随机数字",
  "名称": "功法名称",
  "类型": "功法",
  "品质": {"quality": "品质", "grade": 5},
  "数量": 1,
  "描述": "功法描述",
  "功法效果": {
    "修炼速度加成": 1.35,
    "属性加成": {
      "根骨": 1,
      "灵气上限": 50
    },
    "特殊能力": ["特殊能力描述"]
  },
  "功法技能": [
    {
      "技能名称": "技能1名称",
      "技能描述": "技能1效果描述",
      "消耗": "消耗描述",
      "解锁需要熟练度": 0
    }
  ],
  "修炼进度": 0,
  "已装备": false
}
\`\`\`

⚠️ 功法技能必须数组[]非对象{} | 第一个技能解锁需求必须为0 | 修炼进度0-100 | 已装备默认false
`
