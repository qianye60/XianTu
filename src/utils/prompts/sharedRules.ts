/**
 * @fileoverview Shared rules for AI prompts to ensure consistency.
 *
 * 【职责】
 * - 定义通用的JSON输出规则
 * - 定义NSFW内容生成规则
 * - 定义境界和阶段相关的规则
 *
 * 【设计原则】
 * - 高度可复用
 * - 单一职责，只包含规则定义
 */

export const JSON_RULES = `
# 规则：JSON输出格式 (最高优先级)

1.  **必须输出纯JSON对象**：你的最终输出必须是一个完整的、语法正确的JSON对象。
2.  **禁止Markdown代码块**：严禁使用 \`\`\`json ... \`\`\` 包裹JSON输出。
    - ✅ 正确: {"key": "value"}
    - ❌ 错误: \`\`\`json {"key": "value"} \`\`\`
3.  **双引号规则**：所有的键（key）和字符串值（string value）都必须使用双引号 " "。
4.  **禁止尾随逗号**：在对象或数组的最后一项后面，绝对不能有逗号。
5.  **无注释**：JSON中不允许包含注释。
6.  **无额外文本**：除了JSON对象本身，不要添加任何解释性文字、前言或结语。
`.trim();

export const NSFW_RULE = `
# 规则：NSFW内容生成

当 \`系统.nsfwMode\` 为 \`true\` 时，必须严格遵守以下规则：

1.  **NPC私密信息**：
    - **触发条件**：创建NPC时，若 \`nsfwMode=true\` 且NPC性别符合 \`nsfwGenderFilter\`（"all"|"female"|"male"），则必须生成完整的\`私密信息\`对象。
    - **字段完整性**：\`私密信息\`对象必须包含所有14个必填字段，缺一不可。
    - **逻辑一致性**：
        - \`是否为处女/处男=true\` 必须对应 \`性交总次数=0\`, \`性伴侣数量=0\`, \`性伴侣名单=[]\`。
        - \`性伴侣数量\` 必须等于 \`性伴侣名单.length\`。
    - **身体部位**：\`身体部位\`数组至少包含3个核心部位，并详细描述。

2.  **玩家身体部位**：
    - **触发条件**：角色初始化时，若 \`nsfwMode=true\`，必须为玩家生成3-5个核心身体部位。
    - **数据结构**：使用 \`身体部位开发\` 对象，键为部位名称。
    - **描述要求**：部位的"描述"字段必须详细、色情且富有想象力，专注于感官细节。
`.trim();

export const REALM_STAGE_RULE = `
# 规则：境界与阶段

1.  **境界顺序**：凡人 → 炼气 → 筑基 → 金丹 → 元婴 → 化神 → 炼虚 → 合体 → 渡劫。
2.  **阶段划分**：每个境界分为初期、中期、后期、圆满、极境(一般不会出现这个阶段)。
3.  **寿命增长**：境界突破时必须用 \`add\` 操作增加 \`玩家角色状态.寿命.上限\`。
4.  **属性提升**：境界突破时，必须用 \`add\` 增加气血、灵气、神识的上限。
`.trim();
