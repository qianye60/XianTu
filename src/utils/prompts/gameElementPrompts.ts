// 通用指令：扮演专家角色，并严格遵循JSON格式 (精简版)
export const ROLE_PLAY_INSTRUCTION = `
# 角色与格式要求
你是精通东方玄幻设定的"天机阁"推演大师。严格按照任务指定的JSON格式输出，不得包含JSON格式外的任何文本。
`;

// 1. 世界生成提示词
export const WORLD_ITEM_GENERATION_PROMPT = `${ROLE_PLAY_INSTRUCTION}
# 任务：生成修仙世界设定
## 要求：
1. 世界命名：富有古典韵味（如：玄黄大界、沧澜古陆）
2. 世界描述：200-400字宏观背景
3. 时代背景：当前时代特征

## JSON输出格式
\`\`\`json
{"name":"世界名称","description":"世界背景...","era":"时代背景"}
\`\`\`
`;

// 2. 天资等级生成
export const TALENT_TIER_ITEM_GENERATION_PROMPT = `${ROLE_PLAY_INSTRUCTION}
# 任务：生成天资等级
## 要求：
1. 名称：体现层次感（如：凡夫俗子、天生灵秀）
2. 总点数：10-50之间
3. 稀有度：1-5（1常见，5传说）
4. **稀有度原则**：稀有度为5的“传说”级天资应极为罕见，可以包含“仙”、“神”等字眼，但生成概率需极低，以体现其珍贵。

## JSON输出格式
\`\`\`json
{
  "name": "天资名称",         // 名称: 体现层次感, 如"凡夫俗子"、"天生灵秀"
  "description": "描述...",      // 描述: 对该天资等级的详细说明
  "total_points": 20,           // ⚠️ 总点数: 必须是数字类型(10-50之间), 用于分配给先天六司和购买天赋
  "rarity": 3,                  // ⚠️ 稀有度: 必须是数字类型(1-5), 1最常见, 5为传说级
  "color": "#4169E1"            // 颜色: 用于UI显示的十六进制颜色代码
}
\`\`\`

**⚠️ 重要**: total_points 和 rarity 必须是数字类型，不能是字符串！
`;

// 3. 出身生成
export const ORIGIN_ITEM_GENERATION_PROMPT = `${ROLE_PLAY_INSTRUCTION}
# 任务：生成出身背景
## 要求：
1. 名称：修仙世界特色（如：书香门第、江湖游侠）
2. 描述：详细背景故事
3. 天道点消耗 (talent_cost): 0-10点，背景越强消耗越高
4. 稀有度 (rarity): 1-5 (1常见, 5传说)
5. 属性加成 (attribute_modifiers): 为先天六司（根骨、灵性、悟性、气运、魅力、心性）提供加成，总加成值不超过5点。
6. 背景效果 (effects): 1-2个独特的背景效果描述。

## JSON输出格式
\`\`\`json
{
  "name": "出身名称",         // 名称: 具有修仙世界特色, 如"书香门第"
  "description": "详细描述...",  // 描述: 详细的背景故事
  "talent_cost": 5,            // ⚠️ 天道点消耗: 必须是数字类型(0-10), 背景越强消耗越高
  "rarity": 3,                 // ⚠️ 稀有度: 必须是数字类型(1-5), 1最常见, 5为传说级
  "attribute_modifiers": {   // 属性加成: 为先天六司提供数值加成, 总和不超过5
    "根骨": 1,
    "气运": 1
  },
  "effects": ["效果1", "效果2"] // 背景效果: 1-2个独特的文本效果描述
}
\`\`\`

**⚠️ 重要**: talent_cost 和 rarity 必须是数字类型，不能是字符串！
`;

// 4. 灵根生成
export const SPIRIT_ROOT_ITEM_GENERATION_PROMPT = `${ROLE_PLAY_INSTRUCTION}
# 任务：生成灵根类型
## 要求：
1. 名称：不含等级前缀（如："雷灵根"而非"上品雷灵根"）
2. 等级：下品(1.1x)、中品(1.3x)、上品(1.6x)、极品(2.0x)、神品(2.8x)、特殊、凡品(1.0x)
3. 消耗：下品(3-5)、中品(6-8)、上品(10-12)、极品(15-18)、神品(25-30)、凡品(0-2)
4. **稀有度原则**：“神品”或“仙品”等级的灵根极为珍稀，生成概率需极低。绝大多数情况下应生成“极品”及以下的灵根。

## JSON输出格式
\`\`\`json
{
  "name": "灵根名称",           // 名称: 灵根的具体名称, 如"雷灵根"
  "tier": "等级",              // 等级: 如"上品"、"极品"、"神品"
  "description": "描述...",    // 描述: 对该灵根的详细说明
  "cultivation_speed": "1.6x", // 修炼速度: 以字符串 "x" 结尾的倍率
  "special_effects": ["效果1"],// 特殊效果: 文本描述的特殊能力
  "base_multiplier": 1.6,      // ⚠️ 基础倍率: 必须是数字类型(纯数字)
  "talent_cost": 10,           // ⚠️ 天道点消耗: 必须是数字类型(3-30), 品级越高消耗越大
  "rarity": 3                  // ⚠️ 稀有度: 必须是数字类型(1-5), 1最常见, 5为传说级
}
\`\`\`

**⚠️ 重要**: base_multiplier, talent_cost 和 rarity 必须是数字类型，不能是字符串！
`;

// 5. 天赋生成
export const TALENT_ITEM_GENERATION_PROMPT = `${ROLE_PLAY_INSTRUCTION}
# 任务：生成天赋技能
## 要求：
1. 名称：霸气神秘（如：过目不忘、天生神力）
2. 类型：战斗类/辅助类/特殊类
3. 天道点：1-10点，效果越强点数越高
4. 稀有度：1-5（1常见，5传说）
5. **稀有度原则**：“仙品”、“神品”等级的天赋应极为罕见，其效果强大但不能完全破坏平衡。绝大多数天赋应符合常规修仙世界观。

## JSON输出格式
\`\`\`json
{
  "name": "天赋名称",           // 名称: 霸气或神秘的名称, 如"天生神力"
  "description": "详细描述...",  // 描述: 对天赋效果的详细说明
  "type": "天赋类型",          // 类型: "战斗类"、"辅助类"或"特殊类"
  "talent_cost": 8,            // ⚠️ 天道点: 必须是数字类型(1-10), 效果越强点数越高
  "rarity": 4                  // ⚠️ 稀有度: 必须是数字类型(1-5), 1最常见, 5为传说级
}
\`\`\`

**⚠️ 重要**: talent_cost 和 rarity 必须是数字类型，不能是字符串！
`;

// 6. 地图生成
export const MAP_GENERATION_PROMPT = `
【专项任务：地图数据生成】

# 任务：生成GeoJSON格式修仙世界地图

## 要求：
**地点类型** (Point)：门派宗门、修炼圣地、城镇、危险秘境、自然地貌
**势力范围** (Polygon)：主要门派和势力的领土边界
**坐标范围**：经度102-109，纬度27.5-33
**数量要求**：15-25个地点，6-10个势力范围

## 地点名称格式规范：
**必须严格遵守以下格式**：
- 格式："大陆名称·具体位置"，可以使用多个 · 分隔表示层级关系
- 示例："东胜神洲·花果山" 或 "天星大陆·玄天宗·外门广场" 或 "南域大陆·青云城"
- 地点名称应体现所属大陆和具体位置的层级关系

## 输出格式：
**必须严格按照以下格式，用json代码块包围：**

\`\`\`json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "大陆名称·地点名称",
        "type": "地点类型",
        "description": "地点描述",
        "danger_level": "安全/普通/危险/极危",
        "suitable_for": "适合境界"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [经度, 纬度]
      }
    }
  ]
}
\`\`\`
`;

// 7. NPC动态更新
export const NPC_DYNAMIC_UPDATE_PROMPT = `
【NPC动态更新系统】

# 触发条件
- 与NPC直接互动、NPC出现在场景、影响NPC的事件发生、时间推进影响状态

# 更新注意
1. **高优先级**：有"当前关注"标记的NPC每次对话都要更新记忆，哪怕不在用户身边。

# 必须更新内容
1. **记忆更新**：添加新记忆条目 {"时间":"<游戏年>年<月>月<日>日（从游戏时间获取）","事件":"事件描述"}
   - ⚠️ 时间字段禁止使用"长期"/"今日"/"最近"等模糊描述，必须使用具体日期如"3年2月15日"
2. **好感度调整**：友善对话+1~3，帮助+3~8，赠礼+5~15，冒犯-3~-10，敌对-10~-30
3. **境界更新**：使用描述性文本（"练气二层"、"筑基初期"），禁用数值
4. **状态位置**：健康状态、情绪、特殊状态、位置变化
5. **物品背包**：交易、赠送、消耗后的变化

# 数据格式
使用tavern_commands的set操作，一次最多更新3-5个NPC，优先关注标记的NPC。
`;
