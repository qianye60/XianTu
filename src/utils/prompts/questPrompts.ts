export const QUEST_GENERATION_PROMPT = `
# 任务生成系统

## 当前状态
- 玩家姓名：{{玩家姓名}}
- 境界：{{当前境界}}
- 位置：{{当前位置}}
- 最近事件：{{最近记忆}}

## 生成规则
1. 任务必须符合当前境界和位置
2. 任务目标具体明确，可量化
3. 奖励与难度相匹配
4. 融入修仙世界观

## 输出格式
使用 tavern_commands 创建任务：

\`\`\`json
{
  "text": "任务触发的剧情描述（200-500字）",
  "tavern_commands": [
    {
      "action": "set",
      "key": "任务系统.当前任务列表.<任务ID>",
      "value": {
        "任务ID": "quest_{{时间戳}}",
        "任务名称": "任务标题",
        "任务描述": "详细描述",
        "任务类型": "支线",
        "任务状态": "进行中",
        "目标列表": [
          {
            "描述": "击败3只黑风狼",
            "类型": "击杀",
            "目标ID": "monster_黑风狼",
            "需求数量": 3,
            "当前进度": 0,
            "已完成": false
          }
        ],
        "奖励": {
          "修为": 100,
          "灵石": { "下品": 50 },
          "物品": [
            { "物品ID": "item_healing_pill", "名称": "疗伤丹", "数量": 2 }
          ]
        },
        "发布者": "村长李大山",
        "AI生成": true,
        "创建时间": "{{当前游戏时间}}"
      }
    }
  ]
}
\`\`\`

## 任务类型说明
- **主线**：推动剧情的核心任务
- **支线**：可选的额外任务
- **宗门**：宗门内的任务
- **奇遇**：偶然触发的机缘
- **日常**：可重复的日常任务

## 目标类型说明
- **击杀**：目标ID为怪物名称，如 "monster_黑风狼"
- **采集**：目标ID为物品ID，如 "item_灵草"
- **对话**：目标ID为NPC名称，如 "npc_张长老"
- **到达**：目标ID为地点描述，如 "location_青云峰"
- **使用物品**：目标ID为物品ID
`;

export const QUEST_UPDATE_PROMPT = `
# 任务更新系统

## 当前任务
{{当前任务JSON}}

## 玩家行为
{{玩家最近行为}}

## 更新规则
1. 根据玩家行为更新任务进度
2. 判断是否触发任务演化
3. 检查是否完成所有目标

## 输出格式
\`\`\`json
{
  "text": "任务进度更新的描述",
  "tavern_commands": [
    {
      "action": "set",
      "key": "任务系统.当前任务列表.{{任务ID}}.目标列表.0.当前进度",
      "value": 1
    },
    {
      "action": "set",
      "key": "任务系统.当前任务列表.{{任务ID}}.目标列表.0.已完成",
      "value": false
    }
  ]
}
\`\`\`
`;

export const QUEST_COMPLETE_PROMPT = `
# 任务完成系统

## 完成的任务
{{任务JSON}}

## 发放奖励
根据任务奖励配置，使用 tavern_commands 发放：

\`\`\`json
{
  "text": "任务完成的庆祝描述和奖励发放场景（200-300字）",
  "tavern_commands": [
    // 更新任务状态
    {
      "action": "set",
      "key": "任务系统.当前任务列表.{{任务ID}}.任务状态",
      "value": "已完成"
    },
    // 添加修为
    {
      "action": "add",
      "key": "玩家角色状态.修为.当前",
      "value": {{奖励修为}}
    },
    // 添加灵石
    {
      "action": "add",
      "key": "背包.灵石.下品",
      "value": {{奖励灵石}}
    },
    // 添加物品
    {
      "action": "set",
      "key": "背包.物品.{{物品ID}}",
      "value": {{物品对象}}
    },
    // 移动到已完成列表
    {
      "action": "add_to_array",
      "key": "任务系统.已完成任务",
      "value": "{{任务ID}}"
    },
    // 更新统计
    {
      "action": "add",
      "key": "任务系统.任务统计.完成总数",
      "value": 1
    }
  ]
}
\`\`\`
`;