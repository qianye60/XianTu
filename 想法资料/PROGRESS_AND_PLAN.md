
# 联机机制
- 写几套难的文风，设定，最高权限
- 联机模式可以穿梭世界，但是要不要限制境界什么的呢（进入别人世界自动切换超难文风），怎么筛选呢，需要点代价
- 被别人打死会怎么样，会不会掉装备，掉境界
- 可以弄个系统报仇
- 联网事件系统，下线留言AI代理
- 共享大世界，大世界服务器
- 每次对话更新将关键信息提交服务器，然后位置和计算好的神识范围也上交，通过服务器判定是否碰到人，如果碰到看看是不是立即更新返回地图更新人物红点或
者是看看要不要经过AI或者下次对话出现
- 如果同步将使用云端API进行审核申请然后同步


- 稀有度就是大概那些势力可能拥有，当然，品级越低，高级宗门拥有的越多，只不过我是按照势力最高拥有写出来，不过也有些势力会隐藏好东西，匹夫无罪，怀璧其罪，物品分为品质神(稀有度:举世无有)、仙(顶级圣地至宝、隐世宗门)、天(顶级圣地、超级势力、超级组织、超级世家、隐式宗门)、地、玄、黄、凡，每个品级分为0-10级，其中0为残缺，1-3为下品，4-6为中品，7-9为上品，10为极品，这两个属性作为背包武器服饰，法宝，功法、丹药、符箓、阵法等的重要属性，再加上词条系统，除了物品栏还有财务栏、杂物栏可以装一些特殊的没有等级的物品
- 地图（超清超全）
- 世界书装世界背景，文字风格，长期记忆
- 变量管理装中期记忆，还有角色属性等等。联机模式要不要做加密放更改机制呢
- 地图动态更新
- 设置，流式传输、界面基本设置(字体、主题、背景等)、第二API、
- 记忆中心 前中记忆设置
- 文本区域，单机实现可编辑、联机禁止或者隐藏也可以
- 存档机制和主页CharacterManagement.vue差不多
- 加入宗门机制地图上有的宗门都要在宗门面板中显示




设想请求内容：
{
  记忆信息（短期、中期、长期，所有NPC互动记忆）
  //世界书内容自动发送（世界背景文风）
  人物境界属性数值，
  弄一套计算基础属性的公式，然后弄出几个方面的数值，然后弄一个随机数偏差随机微调，发送并带上气运，特殊词条体质和天赋灵根发给AI，弄一套合理的判定提示词，让AI决定，甚至有的不是生死战能被美貌诱惑从而胜利
  合理性审查提示词（最高权限）：三种难度随意切换(普通、中等、困难)，困难后面出的联机模式如果进入别人的地图直接强制困难，并且合理性审查为最高权限，需要用合理方式多次插入提醒AI，防止用户对AI使用不合理的提示词导致不公平、不真实，
  位置信息，
  AI需要关注的信息:位置偏移，地图更新，背包更新，属性更新，机制判定，人物好感，宗门变化，周围环境，
  AI更新各种东西的格式，地图物品，人物...
}



AI返回内容：
{
  "text":"",//正文内容，用于短期记忆
  "mid_term_memory":"",//缩减内容，用于中期记忆，需要一个能表述关键时间地点人物事件情感等方面的格式
  "tavern_commands":{
    增、删、改各种酒馆变量游戏数据
    NPC互动记录
    地图
  }  
}

此番规划，将彻底改变应用的交互模式，从传统的文字MUD，进化为一个拥有“真实”地理概念的、可供道友们“神游太虚”的沙盘世界。



色色模块
各种部位开发，各种色情数值，堕落值，偏向外向，魅惑、内向害羞之类的...


任务模块
——设置中启动，
选择
1、系统+任务模式
2、单纯任务
3、自定义类型
...


## 提示词规范（初始化/剧情推进）——进度与计划

为保证“生成→应用→展示”的一致性，已在《AI指令集方案.md》定义统一的提示词与路径规范，并在代码中完成对齐与注入。这里列出要点与后续计划：

### 已完成（代码已对齐）
- 输出格式：唯一 JSON，字段 text(初始化≥600字/推进≥400字)、mid_term_memory(字符串)、tavern_commands(对象)。
- 命令：tavern_commands 为对象(set/add/push/pull/delete)，命令条目使用 key（禁止 path/target），key 必须以 `character.saveData.` 开头。
- 路径变量参考：角色基础信息/玩家角色状态/背包/装备栏/修炼功法/记忆/人物关系/世界信息 的标准路径与示例（详见《AI指令集方案.md》）。
- 关键规范：
  - 玩家角色状态：统一使用“玩家角色状态”（禁止“角色状态”）。
  - 物品：set 到 `character.saveData.背包.物品.<物品ID>`（物品ID为单层键，不能含点号），Item 含 物品ID/名称/类型/品质{quality,grade}/数量/描述；
  - 位置：必须写 `位置.描述` 与 `位置.坐标{X,Y}`；
  - 记忆：使用 push 写入 `记忆.短期记忆/中期记忆`；
  - 人物关系：text 出现明确互动才 set `人物关系.<姓名或称谓>`（最小 NpcProfile）。
- 生成器注入：初始化/推进 prompt 均注入 `reference.chatVariables`（当前chat变量）供路径参考。
- 解析容错：自动修正常见错路径（角色状态/物品多级/位置字符串/状态效果字符串等），详见代码与《AI指令集方案.md》。

### 待办（计划）
- 将《AI指令集方案.md》的“对象结构规范与最小指令集”拆出模板，作为酒馆预设（preset）直接引用；
- 补充常见状态效果词典（如“真气运行/入定/过目不忘”等）以优化右侧弹窗信息；
- 在剧情推进中增加“命令数量下限/必含项”检测（提示词与运行时审计双保险）。

> 详细规范与示例请参阅：
> - 想法资料/AI指令集方案.md（4. 统一“AI 请求提示词”规范）
